<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <title>Sistema de Gestión de Rutas - v26.0</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="CSS/estilos.css" />
</head>
<body>

<div class="app-grid">
    <aside id="panel-izq" class="sidebar sidebar-left">
        <div class="panel-header">Operaciones</div>
        <div class="info-scroll">
            <div id="seccion-ruta-manual" class="field-group">
                <label>1. Búsqueda por Ruta</label>
                <input type="text" id="inRuta" placeholder="Ej: 1005..." onfocus="limpiarCombos()" onkeypress="if(event.key==='Enter') busquedaGlobal()">
                <button class="btn-action" onclick="busquedaGlobal()" style="background:var(--primary); margin-top:5px;">MOSTRAR RUTA</button>
            </div>
            
            <hr style="border:0; border-top:1px solid #eee; margin:20px 0;">
            
            <div id="seccion-combos" class="field-group">
                <label>2. Filtros de Servicio</label>
                <div style="margin-bottom:10px;">
                    <label style="display:inline; cursor:pointer">
                        <input type="checkbox" id="checkCodigo" onchange="initCombos()" style="width:auto"> BUSCAR POR CÓDIGO
                    </label>
                </div>
                <select id="cbSrv" onfocus="limpiarBusquedaRuta()" onchange="manejarFiltros(event)"></select>
                <div id="dTur" class="hidden" style="margin-top:10px;"><select id="cbTur" onchange="manejarFiltros(event)"></select></div>
                <div id="dFre" class="hidden" style="margin-top:10px;"><select id="cbFre" onchange="manejarFiltros(event)"></select></div>
                <div id="dRut" class="hidden" style="margin-top:10px;"><select id="cbRut" onchange="manejarFiltros(event)"></select></div>
            </div>
            
            <hr style="border:0; border-top:1px solid #eee; margin:20px 0;">
            
            <div class="field-group">
                <label>3. Localizar Cuadra</label>
                <input type="text" id="inCalle" placeholder="Nombre de calle..." onfocus="limpiarTodoBusqueda()" oninput="sugerir(this.value)" onkeydown="navTeclado(event)">
                <div id="sugList" class="suggestion-list hidden"></div>
                <input type="number" id="inAlt" placeholder="Altura..." onkeypress="if(event.key==='Enter') buscarCuadra()" style="margin-top:10px;">
                <button class="btn-action" onclick="buscarCuadra()" style="margin-top:5px;">BUSCAR DIRECCIÓN</button>
            </div>
            
            <!-- <button class="btn-action" style="background:var(--danger); margin-top:20px;" onclick="limpiarTodo()">LIMPIAR MAPA</button> -->
        </div>

        <div class="layers-control-section" style="margin-top: 15px; padding: 12px; border-top: 1px solid #ddd; background: #fcfcfc;">
            <h4 style="margin: 0 0 10px 0; font-size: 13px; color: #555; text-transform: uppercase; letter-spacing: 0.5px;">Mostrar contenedores</h4>
            
            <div class="check-group" style="display: flex; flex-direction: column; gap: 4px;">
                <label class="check-container">
                    <input type="checkbox" id="check-verdes" class="layer-check"> Verdes
                </label>
                <label class="check-container">
                    <input type="checkbox" id="check-laterales" class="layer-check"> Laterales
                </label>
                <label class="check-container">
                    <input type="checkbox" id="check-bilaterales" class="layer-check"> Bilaterales
                </label>
                <label class="check-container">
                    <input type="checkbox" id="check-soterrados" class="layer-check"> Soterrados
                </label>
                
                <!--<hr style="margin: 6px 0; border: 0; border-top: 1px solid #eee;">
                
                <label class="check-container" style="font-weight: 600;">
                    <input type="checkbox" id="check-cestos" class="layer-check"> Cestos papeleros
                </label>
                -->
            </div>
        </div>
        <div class="control-group">
            <label for="selector-mapa" style="font-weight:bold; font-size:12px;">Mapa Base:</label>
            <select id="selector-mapa" style="width:100%; padding:5px; margin-top:5px; font-size:12px;">
                <option value="carto_light">CartoDB Light</option>
                <option value="osm">OpenStreetMap</option>
                <option value="ign">Mapa Oficial IGN</option>
                <option value="google_streets">Google Maps (Planos)</option>
            </select>
        </div>
    </aside>
    
    <button class="toggle-btn btn-L" onclick="toggleL()">◀</button>
    
    <main id="map"></main>
    
    <aside id="panel-der" class="sidebar sidebar-right">
        <div class="panel-header">Informe Técnico</div>
        <div style="padding: 10px 20px 0 20px;">
            <button id="btn-imprimir" class="btn-action" onclick="generarInforme()" style="background-color: #27ae60;">
                GENERAR REPORTE
            </button>
        </div>
        <div id="sb-contenido" class="info-scroll"></div>
    </aside>
    
    <button class="toggle-btn btn-R" onclick="toggleR()">◀</button>
</div>

<script src="Datos/Z7.js"></script>
<script src="Datos/rutas.js"></script>
<script src="Datos/datos_operativos.js"></script>
<script src="Datos/Verdes.js"></script>
<script src="Datos/PR.js"></script>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script src="JS/mapa.js"></script>

</body>
</html>